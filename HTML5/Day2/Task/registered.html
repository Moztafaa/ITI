<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Welcome</title>
  </head>
  <body>
    <div id="welcomeContent"></div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const userData = {
          name: localStorage.getItem("userName"),
          age: localStorage.getItem("userAge"),
          gender: localStorage.getItem("userGender"),
          color: localStorage.getItem("userColor"),
        };

        const visitCountKey = `visitCount_${userData.name}`;
        let visitCount = localStorage.getItem(visitCountKey);

        if (visitCount) {
          visitCount = parseInt(visitCount) + 1;
        } else {
          visitCount = 1;
        }
        localStorage.setItem(visitCountKey, visitCount);

        const welcomeMessage = `Welcome ${userData.name}, you have visited this site ${visitCount} times`;

        let svgHTML = "";
        if (userData.gender === "female") {
          svgHTML = `
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512" width="150" height="150">
              <path d="M248 24a56 56 0 1 0 -112 0 56 56 0 1 0 112 0zm24 212.7l46.3 62.4c10.5 14.2 30.6 17.2 44.8 6.6s17.2-30.6 6.6-44.8l-70.5-95C274 132 234.3 112 192 112s-82 20-107.2 53.9l-70.5 95c-10.5 14.2-7.6 34.2 6.6 44.8s34.2 7.6 44.8-6.6L112 236.7 112 512c0 17.7 14.3 32 32 32s32-14.3 32-32l0-160c0-8.8 7.2-16 16-16s16 7.2 16 16l0 160c0 17.7 14.3 32 32 32s32-14.3 32-32l0-275.3z"/>
            </svg>`;
        } else {
          svgHTML = `
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="150" height="150">
              <path d="M264 88C264 57.1 289.1 32 320 32C350.9 32 376 57.1 376 88C376 118.9 350.9 144 320 144C289.1 144 264 118.9 264 88zM240 448L214.2 448C203.3 448 195.6 437.3 199 426.9L242 297.9L193.7 363C183.2 377.2 163.1 380.2 148.9 369.6C134.7 359 131.7 339 142.3 324.8L212.8 229.8C238 196 277.7 176 320 176C362.3 176 402 196 427.2 229.9L497.7 324.9C508.2 339.1 505.3 359.1 491.1 369.7C476.9 380.3 456.9 377.3 446.3 363.1L398 298L441 426.9C444.5 437.3 436.7 448 425.8 448L400 448L400 576C400 593.7 385.7 608 368 608C350.3 608 336 593.7 336 576L336 448L304 448L304 576C304 593.7 289.7 608 272 608C254.3 608 240 593.7 240 576L240 448z"/>
            </svg>`;
        }

        document.getElementById("welcomeContent").innerHTML = `
          <h1>${welcomeMessage}</h1>
          <br />
          <div>${svgHTML}</div>
          <br />
          <div>
            <h2>Your Information:</h2>
            <p><strong>Name:</strong> ${userData.name}</p>
            <p><strong>Age:</strong> ${userData.age}</p>
            <p><strong>Gender:</strong> ${userData.gender}</p>
            <p><strong>Favorite Color:</strong> <span style="color: ${userData.color};">${userData.color}</span></p>
          </div>
          <p><a href="storage.html">Back to Registration</a></p>
        `;
      });
    </script>
  </body>
</html>
